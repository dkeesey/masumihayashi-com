---
import { getCollection } from 'astro:content';
import ResponsiveImage from '@components/ResponsiveImage.astro';
import GalleryScrollLayout from '@layouts/GalleryScrollLayout.astro';
import type { CollectionEntry } from 'astro:content';
import type { ArtworkEntry } from '../../../types/artwork';
import { generateSEOTags, type SEOConfig } from "@utils/seo";

const allEntries: CollectionEntry<'artwork'>[] = await getCollection("artwork");
const artworks: ArtworkEntry[] = allEntries.filter(
  (entry) => entry.data.series === "Sacred Architectures"
);

const seoConfig: SEOConfig = {
  title: "Sacred Architectures - Temples and Spiritual Sites of Asia",
  description: "Panoramic photo collages documenting temples, shrines, and sacred sites across Asia, from Angkor Wat to Japanese Buddhist temples.",
  keywords: ["Asian temples", "sacred architecture", "Buddhist temples", "Hindu temples", "spiritual photography", "architectural documentation"],
  type: "article" as const,
  image: artworks[0]?.data.cloudinaryId
};

const seoTags = generateSEOTags(seoConfig);
---

<GalleryScrollLayout title="Sacred Architectures" seoTags={seoTags}>
  <section class="title-section">
    <div class="max-w-4xl mx-auto px-4 title-content">
      <h1 class="text-5xl md:text-6xl font-bold mb-8">Sacred Architectures</h1>
      <p class="text-xl md:text-2xl text-muted-foreground mb-4">
        Panoramic documentation of Asian temples and spiritual sites
      </p>
      <p class="text-lg text-muted-foreground">
        Exploring the architectural magnificence of sacred spaces across Asia, from ancient Khmer temples at Angkor to Japanese Buddhist complexes.
      </p>
    </div>
  </section>

  {artworks.map((artwork) => (
    <section>
      <div class="w-full px-4">
        <a href={`/artwork/${artwork.data.series.toLowerCase().replace(/\s+/g, '-').replace(/&/g, 'and')}/${artwork.slug}/`}>
          <ResponsiveImage
            imageSlug={artwork.slug}
            alt={artwork.data.altTag}
            className="max-h-[calc(100vh-8rem)] mx-auto"
            loading="eager"
          />
          <figcaption class="text-sm py-2 text-center text-white/80">
            <em>{artwork.data.name}</em>
            {artwork.data.year && `, ${artwork.data.year}`}
            {(artwork.data.city || artwork.data.state || artwork.data.country) && (
              <br />
            )}
            {[artwork.data.city, artwork.data.state, artwork.data.country].filter(Boolean).join(', ')}
            {artwork.data.media && (
              <>
                <br />
                {artwork.data.media}
              </>
            )}
            {artwork.data.size && (
              <>
                , {artwork.data.size}
              </>
            )}
            <br />
            Artist: Dr. Masumi Hayashi
          </figcaption>
        </a>
      </div>
    </section>
  ))}
</GalleryScrollLayout>

<style>
  section {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    scroll-snap-align: start;
    padding-top: 2rem;
    padding-bottom: 2rem;
  }

  .title-section {
    justify-content: flex-start;
    padding-top: 0;
  }

  .title-content {
    padding-top: 20vh;
  }

</style>
